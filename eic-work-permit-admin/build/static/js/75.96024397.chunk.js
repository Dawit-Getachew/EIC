(this["webpackJsonpadmin-template"]=this["webpackJsonpadmin-template"]||[]).push([[75],{1253:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(28),c=n(19),i=n(0),o=n(215),s=n(552),l=n(1224),d=n(1182),u=n(576),j=n(160),b=n(564),h=n(594),p=n(581),f=n(559),x=n(1181),m=n(1183),O=n(579),g=n(571),v=n(560),y=n(7),_=n(29),S=n(1299),k=n(1225),I=n(745),w=n.n(I),D=n(746),M=n.n(D),P=n(747),A=n.n(P),C=n(634),T=n.n(C),E=n(170),R=n.n(E),U=n(748),B=n.n(U),F=n(750),W=n.n(F),z=n(749),q=n.n(z),N=n(751),L=n.n(N),H=n(752),V=n.n(H),Q=n(753),Y=n.n(Q),Z=n(754),G=n.n(Z),J=n(1),X=Object(y.a)(s.a)((function(e){var t=e.theme;return"\n        @media (min-width: ".concat(t.breakpoints.values.md,"px) {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n      }\n")})),K=Object(y.a)(l.a)((function(e){var t=e.theme;return"\n        min-width: 36px;\n        color: ".concat(t.colors.primary.light,";\n")})),$=Object(y.a)(d.a)((function(e){var t=e.theme;return"\n        &.Mui-expanded {\n          min-height: 48px;\n        }\n\n        .MuiAccordionSummary-content.Mui-expanded {\n          margin: 12px 0;\n        }\n\n        .MuiSvgIcon-root {\n          transition: ".concat(t.transitions.create(["color"]),";\n        }\n\n        &.MuiButtonBase-root {\n\n          margin-bottom: ").concat(t.spacing(.5),";\n\n          &:last-child {\n            margin-bottom: 0;\n          }\n\n          &.Mui-expanded,\n          &:hover {\n            background: ").concat(t.colors.alpha.black[10],";\n\n            .MuiSvgIcon-root {\n              color: ").concat(t.colors.primary.main,";\n            }\n          }\n        }\n")})),ee=function(e){var t=Object(_.a)(),n=Object(i.useState)(!1),a=Object(c.a)(n,2),r=a[0],o=a[1],l=function(){o(!r)},d=Object(i.useState)("section1"),y=Object(c.a)(d,2),I=y[0],D=y[1],P=function(e){return function(t,n){D(!!n&&e)}};return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(X,{children:[Object(J.jsxs)(s.a,{sx:{display:{sm:"flex"}},alignItems:"center",children:[Object(J.jsx)(u.a,{variant:"rounded",sx:{width:50,height:50},alt:"Zain Baptista",src:"https://thispersondoesnotexist.com/image"}),Object(J.jsxs)(s.a,{sx:{pl:{sm:1.5},pt:{xs:1.5,sm:0}},children:[Object(J.jsx)(j.a,{variant:"h4",gutterBottom:!0,children:e.name}),Object(J.jsx)(j.a,{variant:"subtitle2",children:Object(S.a)(Object(k.a)(new Date,8),new Date,{addSuffix:!0})})]})]}),Object(J.jsxs)(s.a,{sx:{mt:{xs:3,md:0}},children:[Object(J.jsx)(b.a,{placement:"bottom",title:"Start a voice call",children:Object(J.jsx)(h.a,{color:"primary",children:Object(J.jsx)(w.a,{})})}),Object(J.jsx)(b.a,{placement:"bottom",title:"Start a video call",children:Object(J.jsx)(h.a,{color:"primary",children:Object(J.jsx)(M.a,{})})}),Object(J.jsx)(b.a,{placement:"bottom",title:"Conversation information",children:Object(J.jsx)(h.a,{color:"primary",onClick:l,children:Object(J.jsx)(A.a,{})})})]})]}),Object(J.jsx)(p.a,{variant:"temporary",anchor:"rtl"===t.direction?"left":"right",open:r,onClose:l,elevation:9,children:Object(J.jsxs)(s.a,{sx:{minWidth:360},p:2,children:[Object(J.jsxs)(s.a,{sx:{textAlign:"center"},children:[Object(J.jsx)(u.a,{sx:{mx:"auto",my:2,width:t.spacing(12),height:t.spacing(12)},variant:"rounded",alt:"Zain Baptista",src:"https://thispersondoesnotexist.com/image"}),Object(J.jsx)(j.a,{variant:"h4",children:e.name}),Object(J.jsxs)(j.a,{variant:"subtitle2",children:["Active"," ",Object(S.a)(Object(k.a)(new Date,7),new Date,{addSuffix:!0})]})]}),Object(J.jsx)(f.a,{sx:{my:3}}),Object(J.jsxs)(x.a,{expanded:"section1"===I,onChange:P("section1"),children:[Object(J.jsx)($,{expandIcon:Object(J.jsx)(T.a,{}),children:Object(J.jsx)(j.a,{variant:"h5",children:"Customize Chat"})}),Object(J.jsx)(m.a,{sx:{p:0},children:Object(J.jsxs)(O.a,{component:"nav",children:[Object(J.jsxs)(g.a,{button:!0,children:[Object(J.jsx)(K,{children:Object(J.jsx)(R.a,{})}),Object(J.jsx)(v.a,{primary:"Search in Conversation",primaryTypographyProps:{variant:"h5"}})]}),Object(J.jsxs)(g.a,{button:!0,children:[Object(J.jsx)(K,{children:Object(J.jsx)(B.a,{})}),Object(J.jsx)(v.a,{primary:"Change Theme Styling",primaryTypographyProps:{variant:"h5"}})]}),Object(J.jsxs)(g.a,{button:!0,children:[Object(J.jsx)(K,{children:Object(J.jsx)(q.a,{})}),Object(J.jsx)(v.a,{primary:"Choose Default Emoji",primaryTypographyProps:{variant:"h5"}})]})]})})]}),Object(J.jsxs)(x.a,{expanded:"section2"===I,onChange:P("section2"),children:[Object(J.jsx)($,{expandIcon:Object(J.jsx)(T.a,{}),children:Object(J.jsx)(j.a,{variant:"h5",children:"Privacy & Support"})}),Object(J.jsx)(m.a,{sx:{p:0},children:Object(J.jsxs)(O.a,{component:"nav",children:[Object(J.jsxs)(g.a,{button:!0,children:[Object(J.jsx)(K,{children:Object(J.jsx)(W.a,{})}),Object(J.jsx)(v.a,{primary:"Turn off notifications",primaryTypographyProps:{variant:"h5"}})]}),Object(J.jsxs)(g.a,{button:!0,children:[Object(J.jsx)(K,{children:Object(J.jsx)(L.a,{})}),Object(J.jsx)(v.a,{primary:"Ignore all messages",primaryTypographyProps:{variant:"h5"}})]}),Object(J.jsxs)(g.a,{button:!0,children:[Object(J.jsx)(K,{children:Object(J.jsx)(V.a,{})}),Object(J.jsx)(v.a,{primary:"Block user",primaryTypographyProps:{variant:"h5"}})]}),Object(J.jsxs)(g.a,{button:!0,children:[Object(J.jsx)(K,{children:Object(J.jsx)(Y.a,{})}),Object(J.jsx)(v.a,{primary:"Something's Wrong",primaryTypographyProps:{variant:"h5"},secondary:"Report the conversation and provide feedback",secondaryTypographyProps:{variant:"subtitle1"}})]})]})})]}),Object(J.jsxs)(x.a,{expanded:"section3"===I,onChange:P("section3"),children:[Object(J.jsx)($,{expandIcon:Object(J.jsx)(T.a,{}),children:Object(J.jsx)(j.a,{variant:"h5",children:"Shared Files"})}),Object(J.jsx)(m.a,{sx:{p:0},children:Object(J.jsxs)(O.a,{component:"nav",children:[Object(J.jsxs)(g.a,{button:!0,children:[Object(J.jsx)(K,{children:Object(J.jsx)(G.a,{})}),Object(J.jsx)(v.a,{primary:"HolidayPictures.zip",primaryTypographyProps:{variant:"h5"},secondary:"You opened in the past year",secondaryTypographyProps:{variant:"subtitle1"}})]}),Object(J.jsxs)(g.a,{button:!0,children:[Object(J.jsx)(K,{children:Object(J.jsx)(G.a,{})}),Object(J.jsx)(v.a,{primary:"2021Screenshot.jpg",primaryTypographyProps:{variant:"h5"},secondary:"You edited this file yesterday",secondaryTypographyProps:{variant:"subtitle1"}})]}),Object(J.jsxs)(g.a,{button:!0,children:[Object(J.jsx)(K,{children:Object(J.jsx)(G.a,{})}),Object(J.jsx)(v.a,{primary:"PresentationDeck.pdf",primaryTypographyProps:{variant:"h5"},secondary:"Never opened",secondaryTypographyProps:{variant:"subtitle1"}})]})]})})]})]})})]})},te=n(607),ne=n(568),ae=n(584),re=n(598),ce=n(577),ie=n(755),oe=n.n(ie),se=n(756),le=n.n(se),de=Object(y.a)(f.a)((function(e){var t=e.theme;return"\n        height: 40px !important;\n        margin: 0 ".concat(t.spacing(2),";\n        align-self: center;\n")})),ue=Object(y.a)("input")({display:"none"}),je=function(e){var t="Catherine Pike",n="/static/images/avatars/1.jpg",a=Object(i.useState)(""),r=Object(c.a)(a,2),o=r[0],l=r[1];return Object(J.jsxs)(te.a,{sx:{display:"flex",alignItems:"center",p:2},children:[Object(J.jsxs)(ne.a,{mdDown:!0,children:[Object(J.jsx)(u.a,{alt:t,src:n}),Object(J.jsx)(de,{orientation:"vertical",flexItem:!0})]}),Object(J.jsx)(s.a,{sx:{flex:1,mr:2},children:Object(J.jsx)(ae.a,{hiddenLabel:!0,fullWidth:!0,placeholder:"Write here your message...",onChange:function(e){l(e.target.value)},value:o})}),Object(J.jsx)(b.a,{arrow:!0,placement:"top",title:"Choose an emoji",children:Object(J.jsx)(h.a,{color:"primary",children:"\ud83d\ude00"})}),Object(J.jsx)(ue,{accept:"image/*",id:"messenger-upload-file",type:"file"}),Object(J.jsx)(b.a,{arrow:!0,placement:"top",title:"Attach a file",children:Object(J.jsx)("label",{htmlFor:"messenger-upload-file",children:Object(J.jsx)(h.a,{color:"primary",component:"span",children:Object(J.jsx)(oe.a,{})})})}),Object(J.jsxs)(ne.a,{mdDown:!0,children:[Object(J.jsx)(de,{orientation:"vertical",flexItem:!0}),e.isLoading?Object(J.jsx)(re.a,{}):Object(J.jsx)(ce.a,{startIcon:Object(J.jsx)(le.a,{}),variant:"contained",onClick:function(){o.length>0&&(e.sendMessage(o),l(""))},disabled:e.disabled,children:"Send"})]})]})},be=n(4),he=n(496),pe=n(1226),fe=n(592),xe=n(670),me=n(687),Oe=n(595),ge=n(1264),ve=n(1289),ye=n(757),_e=n.n(ye),Se=n(606),ke=n(758),Ie=n.n(ke),we=n(45),De=n(222),Me=function(e,t){var n=Object(r.a)(t).filter((function(e){return e.sender_role===De.a.USER}));return Object(r.a)(e).filter((function(e){return e.sender_role===De.a.USER})).forEach((function(e){n.findIndex((function(t){return String(t._id)===String(e._id)}))<0&&n.push(e)})),n},Pe=n(55),Ae=Object(y.a)(u.a)((function(e){var t=e.theme;return"\n          background-color: ".concat(t.colors.success.lighter,";\n          color: ").concat(t.colors.success.main,";\n          width: ").concat(t.spacing(8),";\n          height: ").concat(t.spacing(8),";\n          margin-left: auto;\n          margin-right: auto;\n    ")})),Ce=(Object(y.a)(s.a)((function(e){var t=e.theme;return"\n          background-color: ".concat(Object(he.d)(t.colors.alpha.black[10],.5),";\n          margin: ").concat(t.spacing(2)," 0;\n          border-radius: ").concat(t.general.borderRadius,";\n          padding: ").concat(t.spacing(2),";\n    ")})),Object(y.a)(s.a)((function(e){var t=e.theme;return"\n        padding: ".concat(t.spacing(2.5),";\n  ")}))),Te=Object(y.a)(pe.a)((function(e){var t=e.theme;return"\n        &.MuiButtonBase-root {\n            margin: ".concat(t.spacing(1)," 0;\n        }\n  ")})),Ee=Object(y.a)(s.a)((function(e){var t=e.theme;return"\n        .MuiTabs-indicator {\n            min-height: 4px;\n            height: 4px;\n            box-shadow: none;\n            border: 0;\n        }\n\n        .MuiTab-root {\n            &.MuiButtonBase-root {\n                padding: 0;\n                margin-right: ".concat(t.spacing(3),";\n                font-size: ").concat(t.typography.pxToRem(16),";\n                color: ").concat(t.colors.alpha.black[50],";\n\n                .MuiTouchRipple-root {\n                    display: none;\n                }\n            }\n\n            &.Mui-selected:hover,\n            &.Mui-selected {\n                color: ").concat(t.colors.alpha.black[100],";\n            }\n        }\n  ")})),Re=function(e){var t="Catherine Pike",n="/static/images/avatars/1.jpg",r="Software Developer",o=Object(i.useState)({invisible:!0}),l=Object(c.a)(o,2),d=l[0],b=l[1],p=Object(i.useState)("all"),x=Object(c.a)(p,2),m=x[0],g=x[1],y=Object(i.useState)(""),_=Object(c.a)(y,2),S=_[0],k=_[1],I=Object(Pe.d)(we.f),w=function(t){var n=function(e,t){var n=0,a=e.filter((function(e){return e.sender_role===De.a.USER})).map((function(e){return String(e._id)})),r=t.filter((function(e){return e.sender_role===De.a.USER})).map((function(e){return String(e._id)}));return a.forEach((function(e){r.findIndex((function(t){return t===e}))<0&&++n})),n}(e.allMessages.filter((function(e){return e.chatID===t.chatID})),I);return Object(J.jsxs)(Te,{selected:String(t._id)===String(S),onClick:function(){return n=t._id,k(n),void e.clickMessage(n);var n},children:[Object(J.jsx)(fe.a,{children:Object(J.jsx)(u.a,{src:"https://thispersondoesnotexist.com/image"})}),Object(J.jsx)(v.a,{sx:{mr:1},primaryTypographyProps:{color:"textPrimary",variant:"h5",noWrap:!0},secondaryTypographyProps:{color:"textSecondary",noWrap:!0},primary:t.name,secondary:t.content}),Boolean(n)&&Object(J.jsx)(Se.a,{color:"primary",children:Object(J.jsx)("b",{children:n})})]},t._id)};return Object(J.jsxs)(Ce,{children:[Object(J.jsxs)(s.a,{display:"flex",alignItems:"flex-start",children:[Object(J.jsx)(u.a,{alt:t,src:n}),Object(J.jsxs)(s.a,{sx:{ml:1.5,flex:1},children:[Object(J.jsxs)(s.a,{display:"flex",alignItems:"flex-start",justifyContent:"space-between",children:[Object(J.jsxs)(s.a,{children:[Object(J.jsx)(j.a,{variant:"h5",noWrap:!0,children:t}),Object(J.jsx)(j.a,{variant:"subtitle1",noWrap:!0,children:r})]}),Object(J.jsx)(h.a,{sx:{p:1},size:"small",color:"primary",children:Object(J.jsx)(_e.a,{fontSize:"small"})})]}),Object(J.jsx)(xe.a,{control:Object(J.jsx)(me.a,{checked:d.invisible,onChange:function(e){b(Object(a.a)(Object(a.a)({},d),{},Object(be.a)({},e.target.name,e.target.checked)))},name:"invisible",color:"primary"}),label:"Invisible"})]})]}),Object(J.jsx)(ae.a,{sx:{mt:2,mb:1},size:"small",fullWidth:!0,InputProps:{startAdornment:Object(J.jsx)(Oe.a,{position:"start",children:Object(J.jsx)(R.a,{})})},placeholder:"Search..."}),Object(J.jsx)(j.a,{sx:{mb:1,mt:2},variant:"h3",children:"Chats"}),Object(J.jsx)(Ee,{children:Object(J.jsx)(ge.a,{onChange:function(e,t){g(t)},value:m,variant:"scrollable",scrollButtons:"auto",textColor:"primary",indicatorColor:"primary",children:[{value:"all",label:"All"},{value:"unread",label:"Unread"},{value:"archived",label:"Archived"}].map((function(e){return Object(J.jsx)(ve.a,{label:e.label,value:e.value},e.value)}))})}),Object(J.jsxs)(s.a,{mt:2,children:["all"===m&&Object(J.jsx)(O.a,{disablePadding:!0,component:"div",children:e.messages.map((function(e){return w(e)}))}),"unread"===m&&Object(J.jsxs)(O.a,{disablePadding:!0,component:"div",children:[Object(J.jsxs)(Te,{children:[Object(J.jsx)(fe.a,{children:Object(J.jsx)(u.a,{src:"/static/images/avatars/1.jpg"})}),Object(J.jsx)(v.a,{sx:{mr:1},primaryTypographyProps:{color:"textPrimary",variant:"h5",noWrap:!0},secondaryTypographyProps:{color:"textSecondary",noWrap:!0},primary:"Zain Baptista",secondary:"Hey there, how are you today? Is it ok if I call you?"}),Object(J.jsx)(Se.a,{color:"primary",children:Object(J.jsx)("b",{children:"2"})})]}),Object(J.jsxs)(Te,{children:[Object(J.jsx)(fe.a,{children:Object(J.jsx)(u.a,{src:"/static/images/avatars/4.jpg"})}),Object(J.jsx)(v.a,{sx:{mr:1},primaryTypographyProps:{color:"textPrimary",variant:"h5",noWrap:!0},secondaryTypographyProps:{color:"textSecondary",noWrap:!0},primary:"Adison Press",secondary:"I recently did some buying on Amazon and now I'm stuck"}),Object(J.jsx)(Se.a,{color:"primary",children:Object(J.jsx)("b",{children:"8"})})]})]}),"archived"===m&&Object(J.jsxs)(s.a,{pb:3,children:[Object(J.jsx)(f.a,{sx:{mb:3}}),Object(J.jsx)(Ae,{children:Object(J.jsx)(Ie.a,{})}),Object(J.jsx)(j.a,{sx:{mt:2,textAlign:"center"},variant:"subtitle2",children:"Hurray! There are no archived chats!"}),Object(J.jsx)(f.a,{sx:{mt:3}})]})]})]})},Ue=n(870),Be=n(263),Fe=n(633),We=n(759),ze=n.n(We),qe=Object(y.a)(f.a)((function(e){var t=e.theme;return"\n      .MuiDivider-wrapper {\n        text-transform: none;\n        background: ".concat(t.palette.background.default,";\n        font-size: ").concat(t.typography.pxToRem(13),";\n        color: ").concat(t.colors.alpha.black[50],";\n      }\n")})),Ne=Object(y.a)(te.a)((function(e){var t=e.theme;return"\n      background: ".concat(t.colors.primary.main,";\n      color: ").concat(t.palette.primary.contrastText,";\n      padding: ").concat(t.spacing(2),";\n      border-radius: ").concat(t.general.borderRadiusXl,";\n      border-top-right-radius: ").concat(t.general.borderRadius,";\n      max-width: 380px;\n      display: inline-flex;\n")})),Le=Object(y.a)(te.a)((function(e){var t=e.theme;return"\n      background: ".concat(t.colors.alpha.black[10],";\n      color: ").concat(t.colors.alpha.black[100],";\n      padding: ").concat(t.spacing(2),";\n      border-radius: ").concat(t.general.borderRadiusXl,";\n      border-top-left-radius: ").concat(t.general.borderRadius,";\n      max-width: 380px;\n      display: inline-flex;\n")})),He=function(e){var t="Catherine Pike",n="/static/images/avatars/1.jpg";return Object(J.jsxs)(s.a,{p:3,children:[Object(J.jsx)(qe,{children:Object(Be.a)(Object(Fe.a)(new Date,3),"MMMM dd yyyy")}),e.messages.slice(0).reverse().map((function(e){return e.sender_role===De.a.USER?(a=e.content,r=e.createdAt,Object(J.jsxs)(s.a,{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",py:3,children:[Object(J.jsx)(u.a,{variant:"rounded",sx:{width:50,height:50},alt:"Zain Baptista",src:"/static/images/avatars/2.jpg"}),Object(J.jsxs)(s.a,{display:"flex",alignItems:"flex-start",flexDirection:"column",justifyContent:"flex-start",ml:2,children:[Object(J.jsx)(Le,{children:a}),Object(J.jsxs)(j.a,{variant:"subtitle1",sx:{pt:1,display:"flex",alignItems:"center"},children:[Object(J.jsx)(ze.a,{sx:{mr:.5},fontSize:"small"}),Object(S.a)(Object(Ue.a)(new Date(r),0),new Date,{addSuffix:!0})]})]})]},r)):function(e,a){return Object(J.jsxs)(s.a,{display:"flex",alignItems:"flex-start",justifyContent:"flex-end",py:3,children:[Object(J.jsxs)(s.a,{display:"flex",alignItems:"flex-end",flexDirection:"column",justifyContent:"flex-end",mr:2,children:[Object(J.jsx)(Ne,{children:e}),Object(J.jsxs)(j.a,{variant:"subtitle1",sx:{pt:1,display:"flex",alignItems:"center"},children:[Object(J.jsx)(ze.a,{sx:{mr:.5},fontSize:"small"}),Object(S.a)(Object(Ue.a)(new Date(a),0),new Date,{addSuffix:!0})]})]}),Object(J.jsx)(u.a,{variant:"rounded",sx:{width:50,height:50},alt:t,src:n})]},a)}(e.content,e.createdAt);var a,r}))]})},Ve=n(181),Qe=n(197),Ye=n(198),Ze=n(199),Ge=function(e,t){var n=t.findIndex((function(t){return String(t.service_id)===String(e)}));return n>=0?t[n]:{}},Je=function(e,t){var n=t.findIndex((function(t){return String(t.service_id)===String(e)}));return n>=0?t[n]:{}},Xe=n(177),Ke=Object.prototype,$e=Ke.toString,et=Ke.hasOwnProperty,tt=Function.prototype.toString,nt=new Map;function at(e,t){try{return rt(e,t)}finally{nt.clear()}}function rt(e,t){if(e===t)return!0;var n=$e.call(e);if(n!==$e.call(t))return!1;switch(n){case"[object Array]":if(e.length!==t.length)return!1;case"[object Object]":if(lt(e,t))return!0;var a=ct(e),r=ct(t),c=a.length;if(c!==r.length)return!1;for(var i=0;i<c;++i)if(!et.call(t,a[i]))return!1;for(i=0;i<c;++i){var o=a[i];if(!rt(e[o],t[o]))return!1}return!0;case"[object Error]":return e.name===t.name&&e.message===t.message;case"[object Number]":if(e!==e)return t!==t;case"[object Boolean]":case"[object Date]":return+e===+t;case"[object RegExp]":case"[object String]":return e==""+t;case"[object Map]":case"[object Set]":if(e.size!==t.size)return!1;if(lt(e,t))return!0;for(var s=e.entries(),l="[object Map]"===n;;){var d=s.next();if(d.done)break;var u=d.value,j=u[0],b=u[1];if(!t.has(j))return!1;if(l&&!rt(b,t.get(j)))return!1}return!0;case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":e=new Uint8Array(e),t=new Uint8Array(t);case"[object DataView]":var h=e.byteLength;if(h===t.byteLength)for(;h--&&e[h]===t[h];);return-1===h;case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":var p=tt.call(e);return p===tt.call(t)&&!function(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n}(p,st)}return!1}function ct(e){return Object.keys(e).filter(it,e)}function it(e){return void 0!==this[e]}var ot,st="{ [native code] }";function lt(e,t){var n=nt.get(e);if(n){if(n.has(t))return!0}else nt.set(e,n=new Set);return n.add(t),!1}!function(e){e[e.Query=0]="Query",e[e.Mutation=1]="Mutation",e[e.Subscription=2]="Subscription"}(ot||(ot={}));var dt=new Map;function ut(e){var t;switch(e){case ot.Query:t="Query";break;case ot.Mutation:t="Mutation";break;case ot.Subscription:t="Subscription"}return t}function jt(e,t){var n=function(e){var t,n,a=dt.get(e);if(a)return a;__DEV__?Object(Xe.a)(!!e&&!!e.kind,"Argument of ".concat(e," passed to parser was not a valid GraphQL ")+"DocumentNode. You may need to use 'graphql-tag' or another method to convert your operation into a document"):Object(Xe.a)(!!e&&!!e.kind,30);var r=e.definitions.filter((function(e){return"FragmentDefinition"===e.kind})),c=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"query"===e.operation})),i=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation})),o=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"subscription"===e.operation}));__DEV__?Object(Xe.a)(!r.length||c.length||i.length||o.length,"Passing only a fragment to 'graphql' is not yet supported. You must include a query, subscription or mutation as well"):Object(Xe.a)(!r.length||c.length||i.length||o.length,31),__DEV__?Object(Xe.a)(c.length+i.length+o.length<=1,"react-apollo only supports a query, subscription, or a mutation per HOC. "+"".concat(e," had ").concat(c.length," queries, ").concat(o.length," ")+"subscriptions and ".concat(i.length," mutations. ")+"You can use 'compose' to join multiple operation types to a component"):Object(Xe.a)(c.length+i.length+o.length<=1,32),n=c.length?ot.Query:ot.Mutation,c.length||i.length||(n=ot.Subscription);var s=c.length?c:i.length?i:o;__DEV__?Object(Xe.a)(1===s.length,"react-apollo only supports one definition per HOC. ".concat(e," had ")+"".concat(s.length," definitions. ")+"You can use 'compose' to join multiple operation types to a component"):Object(Xe.a)(1===s.length,33);var l=s[0];t=l.variableDefinitions||[];var d={name:l.name&&"Name"===l.name.kind?l.name.value:"data",type:n,variables:t};return dt.set(e,d),d}(e),a=ut(t),r=ut(n.type);__DEV__?Object(Xe.a)(n.type===t,"Running a ".concat(a," requires a graphql ")+"".concat(a,", but a ").concat(r," was used instead.")):Object(Xe.a)(n.type===t,34)}var bt=n(303);function ht(e,t){var n=function(e){var t=Object(i.useContext)(Object(bt.a)()),n=e||t.client;return __DEV__?Object(Xe.a)(!!n,'Could not find "client" in the context or passed in as an option. Wrap the root component in an <ApolloProvider>, or pass an ApolloClient instance in via options.'):Object(Xe.a)(!!n,29),n}(null===t||void 0===t?void 0:t.client);jt(e,ot.Subscription);var a=Object(i.useState)({loading:!(null===t||void 0===t?void 0:t.skip),error:void 0,data:void 0,variables:null===t||void 0===t?void 0:t.variables}),r=a[0],c=a[1],o=Object(i.useState)((function(){return(null===t||void 0===t?void 0:t.skip)?null:n.subscribe({query:e,variables:null===t||void 0===t?void 0:t.variables,fetchPolicy:null===t||void 0===t?void 0:t.fetchPolicy,context:null===t||void 0===t?void 0:t.context})})),s=o[0],l=o[1],d=Object(i.useRef)({client:n,subscription:e,options:t});return Object(i.useEffect)((function(){var a,r,i,o,s=null===t||void 0===t?void 0:t.shouldResubscribe;"function"===typeof s&&(s=!!s(t)),(null===t||void 0===t?void 0:t.skip)&&!(null===t||void 0===t?void 0:t.skip)!==!(null===(a=d.current.options)||void 0===a?void 0:a.skip)?(c({loading:!1,data:void 0,error:void 0,variables:null===t||void 0===t?void 0:t.variables}),l(null)):!1===s||n===d.current.client&&e===d.current.subscription&&(null===t||void 0===t?void 0:t.fetchPolicy)===(null===(r=d.current.options)||void 0===r?void 0:r.fetchPolicy)&&!(null===t||void 0===t?void 0:t.skip)===!(null===(i=d.current.options)||void 0===i?void 0:i.skip)&&at(null===t||void 0===t?void 0:t.variables,null===(o=d.current.options)||void 0===o?void 0:o.variables)||(c({loading:!0,data:void 0,error:void 0,variables:null===t||void 0===t?void 0:t.variables}),l(n.subscribe({query:e,variables:null===t||void 0===t?void 0:t.variables,fetchPolicy:null===t||void 0===t?void 0:t.fetchPolicy,context:null===t||void 0===t?void 0:t.context}))),Object.assign(d.current,{client:n,subscription:e,options:t})}),[n,e,t]),Object(i.useEffect)((function(){if(s){var e=s.subscribe({next:function(e){var a,r,i={loading:!1,data:e.data,error:void 0,variables:null===t||void 0===t?void 0:t.variables};c(i),null===(r=null===(a=d.current.options)||void 0===a?void 0:a.onSubscriptionData)||void 0===r||r.call(a,{client:n,subscriptionData:i})},error:function(e){c({loading:!1,data:void 0,error:e,variables:null===t||void 0===t?void 0:t.variables})},complete:function(){var e,t;null===(t=null===(e=d.current.options)||void 0===e?void 0:e.onSubscriptionComplete)||void 0===t||t.call(e)}});return function(){e.unsubscribe()}}}),[s]),r}var pt=n(81),ft=Object(y.a)(s.a)((function(){return"\n       height: 100%;\n       display: flex;\n"})),xt=Object(y.a)(s.a)((function(e){var t=e.theme;return"\n        width: 300px;\n        background: ".concat(t.colors.alpha.white[100],";\n        border-right: ").concat(t.colors.alpha.black[10]," solid 1px;\n")})),mt=Object(y.a)(s.a)((function(){return"\n        width: 100%;\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        flex: 1;\n"})),Ot=Object(y.a)(s.a)((function(e){var t=e.theme;return"\n        background: ".concat(t.colors.alpha.white[100],";\n        border-bottom: ").concat(t.colors.alpha.black[10]," solid 1px;\n        padding: ").concat(t.spacing(3),";\n")})),gt=Object(y.a)(s.a)((function(){return"\n        flex: 1;\n"})),vt=Object(y.a)(s.a)((function(e){var t=e.theme;return"\n        padding: ".concat(t.spacing(3),";\n")}));t.default=function(){var e=Object(i.useRef)(null);Object(i.useEffect)((function(){e.current&&e.current.scrollToBottom()}));var t=Object(Pe.c)(),n=Object(Pe.d)(Qe.c.selectMessages),s=Object(Pe.d)(Ye.c.selectUsers),l=Object(Pe.d)(Ze.c.selectAccounts),d=Object(Pe.d)(we.g);Object(i.useEffect)((function(){Qe.a.FetchMessages((function(e,n){if(e)throw e;t(Qe.b.FetchedMessages(n))})),Ye.a.FetchUsers((function(e,n){if(e)throw e;t(Ye.b.FetchedUsers(n))})),Ze.a.FetchAccounts((function(e,n){if(e)throw e;t(Ze.b.FetchedAccounts(n))}))}),[]);var u=Object(Pe.d)(we.f),j=Object(i.useState)([]),b=Object(c.a)(j,2),h=b[0],p=b[1],f=Object(i.useState)({_id:"",name:"",messages:[]}),x=Object(c.a)(f,2),m=x[0],O=x[1],g=Object(i.useState)(!1),v=Object(c.a)(g,2),y=v[0],_=v[1],S=Object(i.useState)({}),k=Object(c.a)(S,2),I=k[0],w=k[1],D=function(e,t){var n=[];return e.forEach((function(e){n.findIndex((function(n){return n[t]===e[t]}))<0&&n.push(e)})),n};Object(i.useEffect)((function(){if(Object.keys(I).length>0){var e=[];if(n.forEach((function(t){if(e.findIndex((function(e){return e.chatID===t.chatID}))<0)if(t.sender_role===De.a.ADMIN){var n=Je(t.from_user,l),r=Ge(t.to_user,s);e.push(Object(a.a)(Object(a.a)({},t),{},{from_user:n,to_user:r,name:"".concat(n.first_name," ").concat(n.last_name)}))}else if(t.sender_role===De.a.USER){var c=Ge(t.from_user,s),i=Je(t.to_user,l);e.push(Object(a.a)(Object(a.a)({},t),{},{from_user:c,to_user:i,name:"".concat(c.first_name," ").concat(c.last_name)}))}})),p(e),I.sender_role===De.a.USER)Ge(I.from_user,s).service_id===m._id&&(O({_id:String(m._id),name:m.name,messages:n.filter((function(e){return e.chatID===I.chatID}))}),t(we.a.SetReadMessages(Me(n.filter((function(e){return e.chatID===I.chatID})),u))));else Ge(I.to_user,s).service_id===m._id&&(O({_id:String(m._id),name:m.name,messages:n.filter((function(e){return e.chatID===I.chatID}))}),t(we.a.SetReadMessages(Me(n.filter((function(e){return e.chatID===I.chatID})),u))))}else{var r=[];n.forEach((function(e){if(r.findIndex((function(t){return t.chatID===e.chatID}))<0)if(e.sender_role===De.a.ADMIN){var t=Je(e.from_user,l),n=Ge(e.to_user,s);r.push(Object(a.a)(Object(a.a)({},e),{},{from_user:t,to_user:n,name:"".concat(t.first_name," ").concat(t.last_name)}))}else if(e.sender_role===De.a.USER){var c=Ge(e.from_user,s),i=Je(e.to_user,l);r.push(Object(a.a)(Object(a.a)({},e),{},{from_user:c,to_user:i,name:"".concat(c.first_name," ").concat(c.last_name)}))}})),p(r)}}),[n,p,I,O]);var M=ht(Object(pt.g)(d),{}),P=M.data,A=M.loading;return Object(i.useEffect)((function(){P&&P[pt.h]&&(w(P[pt.h]),t(Qe.b.AddMessage(P[pt.h])))}),[A,P,w]),Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(o.a,{children:Object(J.jsx)("title",{children:"Messenger - Applications"})}),Object(J.jsxs)(ft,{children:[Object(J.jsx)(xt,{children:Object(J.jsx)(Ve.Scrollbars,{autoHide:!0,children:Object(J.jsx)(Re,{messages:h,clickMessage:function(e){var a=function(e,t){var n=t.findIndex((function(t){return String(t._id)===String(e)}));return n>=0?t[n]:{}}(e,n),c=D([a].concat(Object(r.a)(n)),"_id").filter((function(e){return e.chatID===a.chatID}));if(a.sender_role===De.a.USER){var i=Ge(a.from_user,s);O({name:"".concat(i.first_name," ").concat(i.last_name),_id:a.from_user,messages:c})}else{var o=Je(a.from_user,l);O({name:"".concat(o.first_name," ").concat(o.last_name),_id:a.to_user,messages:c})}t(we.a.SetReadMessages(Me(c,u)))},allMessages:n})})}),Object(J.jsxs)(mt,{children:[Object(J.jsx)(Ot,{children:Object(J.jsx)(ee,{name:m.name})}),Object(J.jsx)(gt,{children:Object(J.jsx)(Ve.Scrollbars,{ref:e,autoHide:!0,children:Object(J.jsx)(He,{name:m.name,messages:m.messages})})}),Object(J.jsx)(vt,{children:Object(J.jsx)(je,{sendMessage:function(e){_(!0),d&&Qe.a.CreateMessage({content:e,from_user:d,sender_role:De.a.ADMIN,to_user:m._id},(function(e,n){if(e)throw e;n._id&&(t(Qe.b.AddMessage(n)),w(n)),_(!1)}))},disabled:!(m.name.length>0),isLoading:y})})]})]})]})}},606:function(e,t,n){"use strict";var a=n(3),r=n(216),c=n(7),i=n(1),o=["className","color","children"],s=Object(c.a)("span")((function(e){var t=e.theme;return"\n      background-color: ".concat(t.colors.alpha.black[5],";\n      padding: ").concat(t.spacing(.5,1),";\n      font-size: ").concat(t.typography.pxToRem(13),";\n      border-radius: ").concat(t.general.borderRadius,";\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      max-height: ").concat(t.spacing(3),";\n      \n      &.MuiLabel {\n        &-primary {\n          background-color: ").concat(t.colors.primary.lighter,";\n          color: ").concat(t.palette.primary.main,"\n        }\n        \n        &-secondary {\n          background-color: ").concat(t.colors.secondary.lighter,";\n          color: ").concat(t.palette.secondary.main,"\n        }\n        \n        &-success {\n          background-color: ").concat(t.colors.success.lighter,";\n          color: ").concat(t.palette.success.main,"\n        }\n        \n        &-warning {\n          background-color: ").concat(t.colors.warning.lighter,";\n          color: ").concat(t.palette.warning.main,"\n        }\n              \n        &-error {\n          background-color: ").concat(t.colors.error.lighter,";\n          color: ").concat(t.palette.error.main,"\n        }\n        \n        &-info {\n          background-color: ").concat(t.colors.info.lighter,";\n          color: ").concat(t.palette.info.main,"\n        }\n      }\n")}));t.a=function(e){e.className;var t=e.color,n=void 0===t?"secondary":t,c=e.children,l=Object(r.a)(e,o);return Object(i.jsx)(s,Object(a.a)(Object(a.a)({className:"MuiLabel-"+n},l),{},{children:c}))}}}]);
//# sourceMappingURL=75.96024397.chunk.js.map